!function(){"use strict";angular.module("frontend",["ngAnimate","ngSanitize","ngResource","ui.router","weed","frontend.api","frontend.common","frontend.interceptors","ngFileUpload","chart.js","720kb.datepicker"])}(),function(t){"use strict";function e(t,e,i,n,o,a,r,s,c){var l=this;l.display_mode="date",l.endTime=new Date(2015,12,31,0,0,0),l.endTimeHours=new Date,l.endTimeInput=a(l.endTime).format("HH:mm"),l.initialTime=new Date(2012,1,1,0,0,0),l.initialTimeHours=new Date,l.initialTime.setDate(l.initialTime.getDate()-1),l.initialTimeHours.setDate(l.initialTimeHours.getDate()-1),l.initialTimeInput=a(l.initialTime).format("HH:mm"),l.newDataset={},l.loading=!1,l.uploadDataset=function(){i.log(l.newDataset),r.save(l.newDataset,function(t){l.fetchMeterData()})},l.forecast=function(){l.loading=!0,l.forecastResource=new c,l.loading="loading",l.forecastResource.$get(function(e){i.log("FORECAST RESPONSE STLM"),i.log(e);for(var n=0;n<e.test_data.length;n++)t.data[1].push({x:e.test_data[n].fecha,y:e.test_data[n].cobro});for(var n=0;n<e.train_data.length;n++)t.data[2].push({x:e.train_data[n].fecha,y:e.train_data[n].cobro});l.loading="",l.refreshGrid(),l.showError=!0,l.error=e.error})},l.fetchMeterData=function(){t.series=["Reales","Pronostico","Entrenamiento"],t.datasetOverride=[{yAxisID:"y-axis-1"},{yAxisID:"y-axis-2"},{yAxisID:"y-axis-3"}],t.data=[[],[],[]],l.timeseries=new s,l.timeseries.$get(function(e){l.loading=!1,l.dataseries=e.timeseries;for(var i=0;i<l.dataseries.length;i++)t.data[0].push({x:l.dataseries[i].fecha,y:l.dataseries[i].cobro});l.refreshGrid()})},l.refreshGrid=function(){l.updateChartOptions()},l.updateChartOptions=function(){t.options={type:"line",fill:!1,scales:{xAxes:[{type:"time",time:{min:l.initialTime,max:l.endTime},position:"bottom"}]}},t.colors=[{backgroundColor:"rgba(220,220,220,0)",pointBackgroundColor:"#0062ff",pointHoverBackgroundColor:"#0062ff",borderColor:"#0062ff",pointBorderColor:"#0062ff",pointHoverBorderColor:"#0062ff",fill:"rgba(220,220,220,0)"},{backgroundColor:"rgba(220,220,220,0)",pointBackgroundColor:"#FF0000",pointHoverBackgroundColor:"#FF0000",borderColor:"#FF0000",pointBorderColor:"#FF0000",pointHoverBorderColor:"#FF0000",fill:"rgba(220,220,220,0)"},{backgroundColor:"rgba(220,220,220,0)",pointBackgroundColor:"#00FF00",pointHoverBackgroundColor:"#00FF00",borderColor:"#00FF00",pointBorderColor:"#00FF00",pointHoverBorderColor:"#00FF00",fill:"rgba(220,220,220,0)"},"rgba(220,220,220,0)"]},l.fetchMeterData()}t.module("frontend").controller("PredictionController2",e),e.$inject=["$scope","$stateParams","$log","$state","WeedApi","moment","ApiGetPredictions","ApiGetFinanceData","ApiGetSTLM"]}(angular),function(t){"use strict";function e(t,e,i,n,o,a,r,s,c){var l=this;l.display_mode="date",l.endTime=new Date(2015,12,31,0,0,0),l.endTimeHours=new Date,l.endTimeInput=a(l.endTime).format("HH:mm"),l.initialTime=new Date(2012,1,1,0,0,0),l.initialTimeHours=new Date,l.initialTime.setDate(l.initialTime.getDate()-1),l.initialTimeHours.setDate(l.initialTimeHours.getDate()-1),l.initialTimeInput=a(l.initialTime).format("HH:mm"),l.newDataset={},l.loading=!1,l.uploadDataset=function(){i.log(l.newDataset),r.save(l.newDataset,function(t){l.fetchMeterData()})},l.forecast=function(){l.loading=!0,l.forecastResource=new c,l.loading="loading",l.forecastResource.$get(function(e){i.log("FORECAST RESPONSE STLM"),i.log(e);for(var n=0;n<e.test_data.length;n++)t.data[1].push({x:e.test_data[n].fecha,y:e.test_data[n].cobro});for(var n=0;n<e.train_data.length;n++)t.data[2].push({x:e.train_data[n].fecha,y:e.train_data[n].cobro});l.loading="",l.refreshGrid(),l.showError=!0,l.error=e.error})},l.fetchMeterData=function(){t.series=["Reales","Pronostico","Entrenamiento"],t.datasetOverride=[{yAxisID:"y-axis-1"},{yAxisID:"y-axis-2"},{yAxisID:"y-axis-3"}],t.data=[[],[],[]],l.timeseries=new s,l.timeseries.$get(function(e){l.loading=!1,l.dataseries=e.timeseries;for(var i=0;i<l.dataseries.length;i++)t.data[0].push({x:l.dataseries[i].fecha,y:l.dataseries[i].cobro});l.refreshGrid()})},l.refreshGrid=function(){l.updateChartOptions()},l.updateChartOptions=function(){t.options={type:"line",fill:!1,scales:{xAxes:[{type:"time",time:{min:l.initialTime,max:l.endTime},position:"bottom"}]}},t.colors=[{backgroundColor:"rgba(220,220,220,0)",pointBackgroundColor:"#0062ff",pointHoverBackgroundColor:"#0062ff",borderColor:"#0062ff",pointBorderColor:"#0062ff",pointHoverBorderColor:"#0062ff",fill:"rgba(220,220,220,0)"},{backgroundColor:"rgba(220,220,220,0)",pointBackgroundColor:"#FF0000",pointHoverBackgroundColor:"#FF0000",borderColor:"#FF0000",pointBorderColor:"#FF0000",pointHoverBorderColor:"#FF0000",fill:"rgba(220,220,220,0)"},{backgroundColor:"rgba(220,220,220,0)",pointBackgroundColor:"#00FF00",pointHoverBackgroundColor:"#00FF00",borderColor:"#00FF00",pointBorderColor:"#00FF00",pointHoverBorderColor:"#00FF00",fill:"rgba(220,220,220,0)"},"rgba(220,220,220,0)"]},l.fetchMeterData()}t.module("frontend").controller("PredictionController",e),e.$inject=["$scope","$stateParams","$log","$state","WeedApi","moment","ApiGetPredictions","ApiGetFinanceData","ApiGetSTLM"]}(angular),function(t){"use strict";function e(t,e,i){return t([e,"predictions-stlm/"].join(""),{},i)}t.module("api.ApiGetSTLM",[]).factory("ApiGetSTLM",e),e.$inject=["$resource","resourceApi","resourceActions"]}(angular),function(t){"use strict";function e(e){if(void 0===e)return e;var i=new FormData;return t.forEach(e,function(e,n){e instanceof FileList?1==e.length?i.append(n,e[0]):t.forEach(e,function(t,e){i.append(n+"_"+e,t)}):i.append(n,e)}),i}function i(t,i,n){return t([i,"dataset/:pk"].join(""),{pk:"@pk"},{save:{method:"POST",transformRequest:e,headers:{"Content-Type":void 0}}})}t.module("api.ApiGetPredictions",[]).factory("ApiGetPredictions",i),i.$inject=["$resource","resourceApi","resourceActions"]}(angular),function(t){"use strict";function e(t,e,i){return t([e,"meditions/"].join(""),{},i)}t.module("api.ApiGetFinanceData",[]).factory("ApiGetFinanceData",e),e.$inject=["$resource","resourceApi","resourceActions"]}(angular),function(t){"use strict";function e(t){t.state("metersHome",{url:"/",templateUrl:"app/views/predictions/prediction1/index.html",controller:"PredictionController",controllerAs:"ctrl",data:{cssClassnames:"dashboard start"}}).state("pred1",{url:"/prediction1/",templateUrl:"app/views/predictions/prediction1/index.html",controller:"PredictionController",controllerAs:"ctrl",data:{cssClassnames:"dashboard start"}}).state("pred2",{url:"/prediction2/",templateUrl:"app/views/predictions/prediction2/index.html",controller:"PredictionController2",controllerAs:"ctrl",data:{cssClassnames:"dashboard start"}})}t.module("frontend").config(e),e.$inject=["$stateProvider"]}(angular),function(t){"use strict";function e(){return{restrict:"A",replace:!0,scope:{},templateUrl:"app/components/sidebar/sidebar.html",controller:i,controllerAs:"ctrl"}}function i(t,e,i){var n=this;n.stateNum=-1,n.state=t;var o=t.current.name.split("-");"board"==o[0]?n.stateNum=1:"committee"==o[0]?n.stateNum=2:n.stateNum=3,n.idState=e.id}t.module("frontend.common.sidebar",["weed"]).directive("sidebar",e),i.$inject=["$state","$stateParams","$log"]}(angular),function(t){"use strict";function e(){return{controller:["$parse","$element","$attrs","$scope",function(t,e,i,n){var o=t(i.filesModel);e.on("change",function(){o.assign(n,this.files),n.$apply()})}]}}function i(t,e,i,n,o,a,r,s,c){}t.module("frontend.common.filesModel",["weed"]).directive("filesModel",e),i.$inject=["$attrs","$log","$state","$rootScope","$stateParams","moment","$location","WeedApi"]}(angular),function(t){"use strict";function e(t){return function(t,e,i){e.bind("keydown keypress",function(e){13===e.which&&(t.$apply(function(){t.$eval(i.ngEnter,{event:e})}),e.preventDefault())})}}t.module("frontend.common.manageEnter",[]).directive("ngEnter",e),e.$inject=["$log"]}(angular),function(t){"use strict";function e(){return{restrict:"A",replace:!0,scope:{},templateUrl:"app/components/navbar/navbar.html",controller:i,controllerAs:"ctrl"}}function i(t,e,i,n,o,a,r,s,c){}t.module("frontend.common.navbar",["weed"]).directive("navbar",e),i.$inject=["$attrs","$log","$state","$rootScope","$stateParams","moment","$location","WeedApi"]}(angular),angular.module("frontend.interceptors",["frontend.interceptor.interceptor1","frontend.interceptor.interceptor2"]),function(t){"use strict";function e(t,e){return{request:function(t){return t},response:function(t){return t}}}t.module("frontend.interceptor.interceptor1",[]).factory("customInterceptor",e),e.$inject=["$injector","$log"]}(angular),function(t){"use strict";function e(t,e,i){return{request:function(t){return t},response:function(t){return t},responseError:function(t){}}}t.module("frontend.interceptor.interceptor2",[]).factory("authRedirectInterceptor",e),e.$inject=["$injector","$log","WeedApi"]}(angular),function(t){"use strict";t.module("frontend.api",["ngResource","api.ApiGetPredictions","api.ApiGetFinanceData","api.ApiGetSTLM"])}(angular),function(t){"use strict";t.module("frontend").constant("resourceActions",{update:{method:"PUT"},query:{isArray:!1}}).constant("resourceApi","http://localhost:8000/api/")}(angular),function(){"use strict";function t(t){var e=this;e.states=t.get()}angular.module("frontend").controller("MainController",t),t.$inject=["$state"]}(),function(t){"use strict";function e(e){return{restrict:"A",scope:{},link:function(i,n){n.one=e.$on("$stateChangeSuccess",function(e,i,o,a){var r=t.isDefined(a.data)&&t.isDefined(a.data.cssClassnames)?a.data.cssClassnames:null,s=t.isDefined(i.data)&&t.isDefined(i.data.cssClassnames)?i.data.cssClassnames:null;r!=s&&(r&&n.removeClass(r),s&&n.addClass(s))})}}}t.module("frontend.common.routeCssClassname",[]).directive("fiRouteClassNames",e),e.$inject=["$rootScope"]}(angular),function(t){function e(t,e){var i=this;i.download=function(i,n,o){var a=new Uint8Array(i),r=new Blob([a],{type:n}),s=e[0].createElement("a");s.href=t.URL.createObjectURL(r),s.download=o,s.click()}}t.module("frontend.common.downloadFiles",[]).service("DownloadFile",e),e.$inject=["$window","$document"]}(angular),function(){"use strict";angular.module("frontend.common",["frontend.common.routeCssClassname","frontend.common.navbar","frontend.common.sidebar","frontend.common.manageEnter","frontend.common.filesModel"])}(),function(){"use strict";function t(t){t.debug("runBlock end")}t.$inject=["$log"],angular.module("frontend").run(t)}(),function(){"use strict";function t(t,e){t.state("home",{url:"/debug-routes",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"ctrl"}),e.otherwise("/")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("frontend").config(t)}(),function(){"use strict";angular.module("frontend").constant("moment",moment)}(),function(){"use strict";function t(t,e,i){t.debugEnabled(!0),e.interceptors.push("customInterceptor"),e.interceptors.push("authRedirectInterceptor"),i.defaults.stripTrailingSlashes=!1}angular.module("frontend").config(t),t.$inject=["$logProvider","$httpProvider","$resourceProvider"]}(),angular.module("frontend").run(["$templateCache",function(t){t.put("app/main/main.html",'<div class=grid><div class=row><div class="col content"><h1>App states:</h1><ul><li ng-repeat="state in ctrl.states" ng-if=state.name><a ui-sref="{{ state.name }}"><span>{{ state.name }}</span></a></li></ul></div></div></div>'),t.put("app/components/sidebar/sidebar.html","<div><div we-sidebar id=sidebar><a we-sidebar-header isotype=assets/images/gas.png>name</a><ul class=sidebar-list><li><a ui-sref=pred1 ui-sref-active=option-sidebar-selected we-sidebar-link icon=bar-chart>LSTM</a></li><li><a ui-sref=pred2 ui-sref-active=option-sidebar-selected we-sidebar-link icon=bar-chart>Medias Móviles</a></li><li><a ui-sref=pred3 ui-sref-active=option-sidebar-selected we-sidebar-link icon=bar-chart>M.M Ponderadas</a></li></ul></div></div>"),t.put("app/components/navbar/navbar.html",'<div class=navbar><a class="navbar-element navbar-user pull-left"><span class=navbar-element-floater><span class=data><span class=name>Predicciones - Métodos Numéricos UVG</span></span></span></a></div>'),t.put("app/components/popovers/popover-navbar-notifications.html",'<div class="popover-sections popover-navbar-menu-notification"><div class=popover-title>NOTIFICACIONES <span class=tag-counter>Sin leer</span><div class=circle-counter-container><div class=circle-counter>{{ctrl.notReadCounter.count}}</div></div></div><div class=popover-inner-section><div class=row><div class=col><div class=notification-item ng-repeat="notification in ctrl.notificationsDisplay | limitTo: 5"><a type=link position=right><div class=circle-container><div class=circle><i class="ic ic-calendar-o" icon=calendar-o></i></div></div><div class=notification-info><div class="big-up ellipsis"><span class=notif-title-gray>El día de hoy tienes </span><span class=notif-title-blue>{{ notification.description }}</span></div><div class=small-down>{{ notification.formatDate }}</div></div></a></div></div></div></div><div class=popover-footer><a ui-sref=notifications>VER TODOS LOS AVISOS</a></div></div>'),t.put("app/components/popovers/popover-navbar-options.html",'<div class=popover-navbar-container><div class=popover-navbar-menu><ul class=popover-navbar-menu-list><li class=popover-item-menu-item><a ui-sref=profile-config class="popover-item-anchor-item delete">Configurar perfil</a></li><li><a ng-click=ctrl.logout() class="popover-item-anchor-item delete">Cerrar sesión</a></li></ul></div></div>'),t.put("app/components/popovers/popover-notifications-main.html","<!--\nmain\ndetailed\nmeeting\ncommitteeinvitation\nboardinvitation\nmeetingchanged\nnewpublicnote\n--><div class=popover-main-container-notification ng-class=\"{\n        'main': ctrl.currentViewPopoverNotification == 'main',\n        'detailed': ctrl.currentViewPopoverNotification == 'detailed',\n        'meeting': ctrl.currentViewPopoverNotification == 'meeting',\n        'committeeinvitation': ctrl.currentViewPopoverNotification == 'committeeinvitation',\n        'boardinvitation': ctrl.currentViewPopoverNotification == 'boardinvitation',\n        'meetingchanged': ctrl.currentViewPopoverNotification == 'meetingchanged',\n        'newpublicnote': ctrl.currentViewPopoverNotification == 'newpublicnote'}\"><!--- Main view ---><div class=\"popover-sections popover-main popover-navbar-menu-notification\"><div class=popover-title>ALERTAS <button ng-if=\"ctrl.notificationsDisplay.length > 5\" ui-sref=notifications class=\"view-all button button-main button-small\">View <span class=notification-number>{{ ctrl.notificationsDisplay.length }} - 5</span> More</button> <button ng-if=\"ctrl.notificationsDisplay.length <= 5\" ui-sref=notifications class=\"view-all button button-main button-small\">Ver Mas</button></div><div class=popover-inner-section><div class=row><div class=col><div class=notification-item ng-repeat=\"notification in ctrl.notificationsDisplay | limitTo: 5\"><a href=\"\" type=link position=right><div class=circle-container><div class=circle><i class=\"fa fa-exclamation-triangle\"></i></div></div><div class=notification-info><div class=\"big-up ellipsis\"><span class=notif-title-blue>{{ notification.description }}</span></div><div class=small-down>{{ notification.inserted_at }}</div></div></a></div></div></div></div></div></div>"),t.put("app/views/predictions/prediction1/index.html",'<div navbar search-bar></div><div sidebar></div><div class="grid main-container"><div class=row><div class="col content"><div class=grid><div class=row><div class=col><h1>Metodo 1: Redes Neuronales Recurrentes (LSTM)</h1><h3>Datos Históricos</h3><form ng-submit=ctrl.uploadDataset() action="">Cargar Datos: <input files-model=ctrl.newDataset.file type=file> <button class="button button-small">Cargar</button></form><h4 ng-if=ctrl.showError>Error: {{ctrl.error}}</h4></div></div></div><div class="grid input-grid"><div class=row><div class="col-xs-2 content filters"><label class=time-label for=time-begin>Initial:</label><input type=date ng-model=ctrl.initialTime class="date-input input-small" required><label class=time-label for=time-end>End:</label><input type=date ng-model=ctrl.endTime class="date-input input-small" required><div class="content actions"><button class="button button-small refresh-axis-button" ng-click=ctrl.refreshGrid()>Refresh</button> <button class="button button-success button-small left {{ ctrl.loading}}" ng-click=ctrl.forecast()>Realizar Pronosticos</button></div><h3 ng-if="ctrl.loading == \'loading\'">Realizando pronostico, esto puedo tomar varios minutos....</h3></div></div></div><canvas id=line class="chart chart-line" chart-data=data chart-colors=colors chart-labels=labels chart-series=series chart-options=options chart-click=onClick></canvas></div></div></div>'),t.put("app/views/predictions/prediction2/index.html",'<div navbar search-bar></div><div sidebar></div><div class="grid main-container"><div class=row><div class="col content"><div class=grid><div class=row><div class=col><h1>Metodo 2: Medias Móviles</h1><h3>Datos Históricos</h3><form ng-submit=ctrl.uploadDataset() action="">Cargar Datos: <input files-model=ctrl.newDataset.file type=file> <button class="button button-small">Cargar</button></form><h4 ng-if=ctrl.showError>Error: {{ctrl.error}}</h4></div></div></div><div class="grid input-grid"><div class=row><div class="col-xs-2 content filters"><label class=time-label for=time-begin>Initial:</label><input type=date ng-model=ctrl.initialTime class="date-input input-small" required><label class=time-label for=time-end>End:</label><input type=date ng-model=ctrl.endTime class="date-input input-small" required><div class="content actions"><button class="button button-small refresh-axis-button" ng-click=ctrl.refreshGrid()>Refresh</button> <button class="button button-success button-small left {{ ctrl.loading}}" ng-click=ctrl.forecast()>Realizar Pronosticos</button></div><h3 ng-if="ctrl.loading == \'loading\'">Realizando pronostico, esto puedo tomar varios minutos....</h3></div></div></div><canvas id=line class="chart chart-line" chart-data=data chart-colors=colors chart-labels=labels chart-series=series chart-options=options chart-click=onClick></canvas></div></div></div>')}]);